# GenFlow 文档整合计划

## 1. 现有文档分析

经过审阅，我们发现当前有四个主要文档，它们分别描述了系统的不同方面：

1. **content_flow_develop_guide.md** - 技术实现指南，描述系统架构和开发细节
2. **content_flow_construct.md** - 系统架构概述，包括工作流程和模块化设计
3. **ai-writing-assistant-api.md** - 写作助手API规范，定义前后端交互接口
4. **ai-writing_tool_api.md** - 写作工具API规范，定义编辑器与后端交互

这些文档在概念描述、术语使用和接口定义上存在一些不一致，需要进行统一和整合。

## 2. 问题识别

### 2.1 重叠内容
- 系统架构在多个文档中重复描述
- 工作流程在不同文档中表述不一致
- API端点和数据结构有重复定义

### 2.2 术语不一致
- "阶段"的称呼不统一：有的用"stage"，有的用"phase"
- 智能体团队的命名不统一：有的用"crew"，有的用"team"
- 写作阶段的定义不一致：有的分为4个阶段，有的分为5个阶段

### 2.3 接口重叠
- 写作助手API和写作工具API在某些功能上存在重叠
- WebSocket事件类型定义存在部分冗余
- 错误代码和响应格式不完全一致

## 3. 整合计划

### 3.1 文档结构优化

将现有文档整合为三个核心文档：

1. **内容生产系统集成指南**（新文档）
   - 统一描述系统架构、工作流程和集成方式
   - 为前端和后端开发者提供完整的技术集成参考
   - 统一术语和概念定义

2. **API规范文档**（合并现有API文档）
   - 统一写作助手API和写作工具API
   - 明确区分不同API的职责和使用场景
   - 统一数据结构和错误处理机制

3. **开发者实现指南**（优化现有开发指南）
   - 面向后端开发者的详细实现指南
   - 提供CrewAI配置和集成的详细说明
   - 包含代码示例和最佳实践

### 3.2 术语统一

| 统一术语 | 替换术语 | 说明 |
|---------|---------|------|
| 写作阶段 (Writing Stage) | phase, step | 系统内容生产的主要阶段 |
| 智能体团队 (Agent Crew) | team, group | 执行特定任务的智能体集合 |
| 工具 (Tool) | utility, helper | 智能体使用的功能模块 |
| 会话 (Session) | conversation | 前端与后端的交互上下文 |
| 建议 (Suggestion) | recommendation, advice | 系统提供的写作辅助内容 |

### 3.3 工作流程统一

统一定义内容生产的五个核心阶段：

1. **选题阶段** (Topic Discovery)
2. **研究阶段** (Research) - 可选
3. **写作阶段** (Writing)
4. **风格化阶段** (Styling)
5. **审核阶段** (Review)

每个阶段明确定义：
- 输入和输出
- 人工干预点
- 智能体组成
- 使用的工具
- API交互方式

### 3.4 API整合

将API接口按功能明确划分：

1. **会话管理API**
   - 创建和管理写作会话
   - 状态查询和更新

2. **内容生产API**
   - 主题发现和研究
   - 内容创作和优化
   - 审核和发布

3. **实时交互API**
   - WebSocket实时通信
   - 编辑器集成接口
   - 状态同步机制

## 4. 实施路线

### 4.1 第一阶段：内容审核与映射（1周）
- 详细审查现有文档
- 创建术语对照表
- 设计新的文档结构

### 4.2 第二阶段：创建集成指南（2周）
- 编写内容生产系统集成指南
- 统一系统架构和工作流程描述
- 明确前端和后端集成方式

### 4.3 第三阶段：API文档整合（1周）
- 合并现有API文档
- 统一数据结构和接口定义
- 完善错误处理和安全机制

### 4.4 第四阶段：开发者指南优化（2周）
- 更新开发者实现指南
- 补充代码示例和最佳实践
- 添加常见问题解答

## 5. 成果交付

完成整合后，将提供以下文档：

1. **[NEW] content_flow_integration_guide.md**
   - 全面的系统集成指南，包含统一的术语和概念

2. **[UPDATED] api_specification.md**
   - 统一的API规范文档，合并现有两个API文档

3. **[UPDATED] developer_guide.md**
   - 优化的开发者实施指南，包含详细实现说明

4. **[NEW] terminology_glossary.md**
   - 术语表，包含所有统一后的术语定义和说明

## 6. 后续计划

- 建立文档更新机制，确保后续开发中术语和概念保持一致
- 基于整合后的文档，创建开发者培训材料
- 定期审查文档，确保与系统演进保持同步

---

最后更新: 2024-05-15 